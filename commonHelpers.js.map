{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = '42454859-ed417d87285a7db1b1c819d54';\nconst baseURL = 'https://pixabay.com/api/';\n\nexport async function searchImages(searchInput, page) {\n    try {\n        const searchParams = new URLSearchParams({\n            key: apiKey,\n            q: searchInput,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            page: page,\n            per_page: 15,\n        });\n\n        const { data } = await axios.get(`${baseURL}?${searchParams}`);\n\n        if (!data || data.hits.length === 0) {\n            throw new Error('No images found');\n        }\n\n        return data.hits;\n    } catch (error) {\n        throw new Error(`Error fetching data: ${error.message}`);\n    }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderGallery(imgs) {\n    \n    loader.style.display = 'none';\n\n    if (imgs.length === 0) {\n        iziToast.show({\n    message: 'Sorry, there are no images matching </br> your search query. Please try again!',\n    messageColor: 'white',\n    backgroundColor: '#EF4040',\n    position: 'topRight',\n    iconColor: 'white',\n    close: true,\n    displayMode: 1,\n    timeout: 3000\n});\n        return;\n    }\n\n    imgs.forEach(img => {\n        const card = document.createElement('div');\n        card.classList.add('card');\n        card.innerHTML = `\n        <li><a href=\"${img.largeImageURL}\" data-lightbox=\"gallery\">\n                <img src=\"${img.webformatURL}\" alt=\"${img.tags}\">\n            </a>\n            <div>\n            <p> <span>Likes:</span> <br/> ${img.likes}</p>\n            <p> <span>Views:</span> <br/> ${img.views}</p>\n            <p> <span>Comments:</span> <br/> ${img.comments}</p>\n            <p> <span>Downloads:</span> <br/> ${img.downloads}</p>\n            </div>\n            </li>\n        `;\n        gallery.appendChild(card);\n    });\n\n    lightbox.refresh();\n\n}\n","import { searchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.form');\nconst searchImg = document.getElementById('search-img');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadButton = document.querySelector('.load-btn');\n\nlet page = 1;\nlet perPage = 15;\n// let totalHits;\n// const totalPages = Math.ceil(totalHits / perPage);\n\nloader.style.display = 'none';\nloadButton.style.display = 'none';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nloadButton.addEventListener('click', async function () {\n\n    if (perPage < 15) {\n        loadButton.style.display = 'none';\n    return iziToast.error({\n      position: \"topRight\",\n      message: \"We're sorry, there are no more posts to load\"\n    });\n  }\n  \n        \n    try {\n        const searchInput = searchImg.value.trim();\n        const imgs = await searchImages(searchInput, page); \n        renderGallery(imgs);\n        page++; \n        checkLoadButtonVisibility(imgs);\n\n        smoothScroll();\n        lightbox.refresh();\n\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        iziToast.error({\n            position: 'topRight',\n            title: 'Error',\n            message: 'An error occurred. Please try again.'\n        });\n    }\n});\n\nform.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    page = 1;\n    const searchInput = searchImg.value.trim();\n\n    if (searchInput === '') {\n        iziToast.error({\n            title: 'Error',\n            position: 'topRight',\n            message: 'Please enter a search term'\n        });\n        return;\n    }\n\n    gallery.innerHTML = '';\n\n    try {\n        loader.style.display = 'block';\n        \n        const imgs = await searchImages(searchInput, page);\n        renderGallery(imgs);\n        searchImg.value = '';\n        checkLoadButtonVisibility(imgs);\n\n        lightbox.refresh();\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        iziToast.error({\n            title: 'Error',\n            position: 'topRight',\n            message: 'An error occurred. Please try again.'\n        });\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nfunction checkLoadButtonVisibility(imgs) {\n    if (imgs.length === 15) { \n        loadButton.style.display = 'block';\n    } else {\n        loadButton.style.display = 'none';\n    }\n}\n\nfunction smoothScroll() {\n    const cardHeight = document.querySelector('.card').getBoundingClientRect().height;\n    const scrollDistance = cardHeight * 2;\n    window.scrollBy({\n        top: scrollDistance,\n        behavior: 'smooth',\n    });\n}\n\n"],"names":["apiKey","baseURL","searchImages","searchInput","page","searchParams","data","axios","error","loader","gallery","lightbox","SimpleLightbox","renderGallery","imgs","iziToast","img","card","form","searchImg","loadButton","checkLoadButtonVisibility","smoothScroll","e","scrollDistance"],"mappings":"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"}